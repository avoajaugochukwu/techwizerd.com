<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>How to Build a Podcast Player With React Js Tailwind Css and Apple Podcast Api Part 3 | Techwizerd - Full Stack Developer - React, Python, Django</title><meta name=keywords content><meta name=description content="Setting up the React-Redux store to handle playing audio In this section, we would implement the react-redux state management that handles our currently playing podcast. And allows users to visit other pages without stopping the music.
This means that the playing audio will be attached to a component that is rendered throughout the entire application. The App component is the best component that fits this bill in our application. Because all other components are its children in one way other."><meta name=author content="Ugochukwu Avoaja"><link rel=canonical href=https://techwizerd.com/posts/how-to-build-a-podcast-player-with-react-js-tailwind-css-and-apple-podcast-api-part-3/><meta name=google-site-verification content="R31akGzoNJ5t-0XrSCfjF5KFi7BM5a2ffHJnsgN5bjY"><link href=/assets/css/stylesheet.min.ae2a6149f7fcbb90ee67916d17690212fa0adbbd4e7a49c171aacf63f1afeb0a.css integrity="sha256-riphSff8u5DuZ5FtF2kCEvoK271OeknBcarPY/Gv6wo=" rel="preload stylesheet" as=style><link rel=icon href=https://techwizerd.com/img/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://techwizerd.com/img/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://techwizerd.com/img/favicon.ico><link rel=apple-touch-icon href=https://techwizerd.com/img/favicon.ico><link rel=mask-icon href=https://techwizerd.com/img/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.80.0"><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-91494440-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><meta property="og:title" content="How to Build a Podcast Player With React Js Tailwind Css and Apple Podcast Api Part 3"><meta property="og:description" content="Setting up the React-Redux store to handle playing audio In this section, we would implement the react-redux state management that handles our currently playing podcast. And allows users to visit other pages without stopping the music.
This means that the playing audio will be attached to a component that is rendered throughout the entire application. The App component is the best component that fits this bill in our application. Because all other components are its children in one way other."><meta property="og:type" content="article"><meta property="og:url" content="https://techwizerd.com/posts/how-to-build-a-podcast-player-with-react-js-tailwind-css-and-apple-podcast-api-part-3/"><meta property="og:image" content="https://techwizerd.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:published_time" content="2021-06-23T16:29:49+01:00"><meta property="article:modified_time" content="2021-06-23T16:29:49+01:00"><meta property="og:site_name" content="Techwizerd"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://techwizerd.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="How to Build a Podcast Player With React Js Tailwind Css and Apple Podcast Api Part 3"><meta name=twitter:description content="Setting up the React-Redux store to handle playing audio In this section, we would implement the react-redux state management that handles our currently playing podcast. And allows users to visit other pages without stopping the music.
This means that the playing audio will be attached to a component that is rendered throughout the entire application. The App component is the best component that fits this bill in our application. Because all other components are its children in one way other."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":" Blog Archive","item":"https://techwizerd.com/posts/"},{"@type":"ListItem","position":3,"name":"How to Build a Podcast Player With React Js Tailwind Css and Apple Podcast Api Part 3","item":"https://techwizerd.com/posts/how-to-build-a-podcast-player-with-react-js-tailwind-css-and-apple-podcast-api-part-3/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"How to Build a Podcast Player With React Js Tailwind Css and Apple Podcast Api Part 3","name":"How to Build a Podcast Player With React Js Tailwind Css and Apple Podcast Api Part 3","description":"Setting up the React-Redux store to handle playing audio In this section, we would implement the react-redux state management that handles our currently playing podcast. And allows â€¦","keywords":[],"articleBody":"Setting up the React-Redux store to handle playing audio In this section, we would implement the react-redux state management that handles our currently playing podcast. And allows users to visit other pages without stopping the music.\nThis means that the playing audio will be attached to a component that is rendered throughout the entire application. The App component is the best component that fits this bill in our application. Because all other components are its children in one way other.\nA little about React-Redux Redux is a predictable state container for JavaScript apps.\nReact Redux is the official React UI bindings layer for Redux. It lets your React components read data from a Redux store and dispatch actions to the store to update the state.\nReact-Redux helps manage the state across the application. Whenever the application state is updated, it will reflect everywhere the state is subscribed. It is perfect for our functional components. And even for state components, you do not have to pass the state down through props. It can get messy. With React-Redux, you can maintain a single source of truth where all components can subscribe to. Since it is a state management tool, it can persist between page navigations, which is perfect for our audio player.\nIf you want to learn more about React Redux, please visit the official site.\nTo set up a working React Redux store, you have to do the following:\n Install react-redux, redux-thunk Create a play audio reducer (React Redux) Create a play audio action (React Redux) Create a store Subscribe the entire application to the store Create functions in App.js to handle audio  Other parts of the tutorial ðŸ“˜ How to Build a Podcast Player With React Js part 1\nðŸ“˜ How to Build a Podcast Player With React Js part 2\nðŸ“˜ How to Build a Podcast Player With React Js part 3\nðŸ“˜ How to Build a Podcast Player With React Js part 4\nðŸ“˜ How to Build a Podcast Player With React Js part 5\nInstall react-redux, redux-thunk Run:\nyarn add react-redux redux-thunk Create a play audio reducer (React Redux) Create a folder called redux within the src folder. This folder will house all the react-redux related files.\nCreate a folder within the redux folder called reducers. Then create a new file called playEpisodeReducer.js within the reducers folder.\nReducers are functions that take the current state and an action as arguments and return a new state result. In other words, (state, action) = newState.\nCopy the code below into the playEpisodeReducer.js file.\nexport const EPISODE_PLAY_REQUEST = 'EPISODE_PLAY_REQUEST' export const EPISODE_PLAYING = 'EPISODE_PLAYING' export const EPISODE_PAUSE = 'EPISODE_PAUSE' const initialState = { loading: false, isPlaying: undefined, episode: {}, error: false } export const playEpisodeReducer = (state = initialState, action) = { switch (action.type) { case EPISODE_PLAY_REQUEST: return { ...state, episode: action.payload, loading: true, } case EPISODE_PLAYING: return { ...state, isPlaying: true, loading: false } case EPISODE_PAUSE: return { ...state, isPlaying: false } default: return state } } This reducer has 3 actions.\nWhen the EPISODE_PLAY_REQUEST is triggered. It returns the state and episode object, which holds details of the episode the user just clicked on. It then sets loading to true, although no loading signal was implemented in the application. You can implement that later. It will not impact the applicationâ€™s functionality; the audio is either playing or not in the application. But most audio apps have a loading functionality; as the audio loads, you get a spinning indicator telling you that the music is downloading and will start soon.\nThe episode object can now be accessed anywhere in the application because it has been added to the store. The store will be created soon.\nThe EPISODE_PLAYING is triggered right after EPISODE_PLAY_REQUEST, and it also returns the state. It changes loading to false. And also returns isPlaying as true. isPlaying will be used to display the pause button. When isPlaying is true, the pause button will be displayed, and when isPlaying is false, the play button will display. The play/pause buttons will be implemented in the components.\nIf no action is passed the code defaults to the default and just returns the state.\nCreate a play audio action (React Redux) Create a folder within the redux folder called actions. Then create a new file called playEpisodeActions.js within the actions folder.\nCopy the code below into the playEpisodeActions.js file.\nimport { EPISODE_PLAY_REQUEST, EPISODE_PLAYING, EPISODE_PAUSE } from '../reducers/playEpisodeReducer' export const play = (episode) = async (dispatch) = { const episodeDetails = getEpisodeDetails(episode) dispatch ({ type: EPISODE_PLAY_REQUEST, payload: episodeDetails }) try { dispatch({ type: EPISODE_PLAYING }) } catch (error) { console.log(error) } } export const pause = () = (dispatch) = { dispatch({ type: EPISODE_PAUSE }) } export const getEpisodeDetails = (episode) = { // episode object has so many properties, take only relevant ones  const { episodeUrl, artworkUrl60, trackId, trackTimeMillis, trackName, shortDescription, collectionName } = episode const episodeDetails = { episodeUrl, artworkUrl60, trackId, trackTimeMillis, trackName, shortDescription, collectionName } return episodeDetails } This file has 3 functions, 2 (play and pause) are redux actions. The other one, getEpisodeDetails, is a helper function.\nThe getEpisodeDetails takes an episode as a parameter, destructures it to get only the properties that will be displayed in the application. Then creates and returns an object called episodeDetails. This function is necessary because each episode record from Appleâ€™s API has a lot of properties. And only a few are needed by the application.\nThe play function will be called when the play button is clicked. In the play function, getEpisodeDetails is called to trim down episode and save the result in episodeDetails constant.\nNext, you dispatch the EPISODE_PLAY_REQUEST action and pass episodeDetails to the reducer. This dispatch will match the EPISODE_PLAY_REQUEST condition in the playEpisodeReducer.jsâ€™s switch case, which will save the episodeDetails to the store.\nThen a try/catch is used to dispatch EPISODE_PLAYING to the store. This will match EPISODE_PLAYING condition in the playEpisodeReducer.js switch case, which changes the isPlaying to true, to indicate that audio is playing.\nThe pause function dispatches the EPISODE_PAUSE action to the store, which changes the isPlaying to false.\nThe play and pause functions are handled by React components, while redux maintains the currently playing episode. So that you can have it in our footer section, which doesnâ€™t change as we navigate between different pages, and you can also navigate through different pages while the audio is playing.\nCreate a store The next step is to bring this all together. By creating a store. The store is responsible for coordinating the flow between the action and reducer.\nIn the redux folder, create a file called store.js.\nCopy the code below into the store.js file.\nimport { createStore, combineReducers, compose, applyMiddleware } from 'redux' import thunk from 'redux-thunk'; import { playEpisodeReducer } from './reducers/playEpisodeReducer' const initialState = { currentTrack: { episode : {episodeUrl: undefined}} } const reducer = combineReducers({ currentTrack: playEpisodeReducer }) const composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose; const store = createStore( reducer, initialState, composeEnhancer(applyMiddleware(thunk)) ) export default store The process of creating a redux store is the same across most applications. For a comprehensive guide to React-Redux, see this tutorial and the official guide.\nIn this file, multiple modules are imported through redux and redux-thunk.\nThe reducer - playEpisodeReducer  is also imported to register it.\nNext, an initialState object is created. This object has nested objects episode within currentTrack. And the episode object has an episodeUrl property set to undefined. This property will be used to hide or display the FooterPlayer component. If episodeUrl is undefined, the FooterPlayer will not show. Because it means the user has not tried to play any episode since visiting the application.\nThis initialState object is a representation of the redux store when the application is first loaded. When the user clicks on play then episodeDetails will be updated with details of the episode that was clicked.\nThe net part is boiler plate code.\nNext register the reducer through combineReducers.\nThen add the Redux chrome dev tools.\nThen finally create the store with the reducer and initial state.\nSubscribe the entire application to the store Go back to the index.js file in the root of the src folder.\nOverwrite all the code in index.css with the code below\nimport React from 'react'; import ReactDOM from 'react-dom'; import './index.css'; import App from './App'; import { Provider } from 'react-redux' import store from './redux/store' ReactDOM.render( React.StrictMode Provider store={store} App / Provider React.StrictMode, document.getElementById('root') ); Here you are registering the redux store in our application. All you have done so far is create the store its reducer and actions.\nCreate functions in App.js to handle audio Now go back to the App.js file.\nAnd overwrite the code in there with the one below.\nimport React, { useState } from 'react' import { BrowserRouter } from 'react-router-dom' import SideBar from './containers/SideBar' import MainSection from './containers/MainSection' import MobileHeader from './components/MobileHeader' import FooterPlayer from './components/FooterPlayer' import { useDispatch, useSelector } from 'react-redux' import { play, pause } from './redux/actions/playEpisodeActions' import './App.css'; function App() { const [audio, setAudio] = useState({}) const dispatch = useDispatch() const currentTrack = useSelector((state) = state.currentTrack) const { isPlaying, episode: { episodeUrl, collectionName } } = currentTrack document.title = collectionName \u0026\u0026 isPlaying ? collectionName : 'Podcast Player' const handlePlay = (episode) = (e) = { let sound if (!episodeUrl) { sound = new Audio(episode.episodeUrl) sound.play() setAudio(sound) dispatch(play(episode)) } else if (episodeUrl !== episode.episodeUrl) { audio.pause() sound = new Audio(episode.episodeUrl) sound.play() setAudio(sound) dispatch(play(episode)) } else { audio.play() dispatch(play(episode)) } } const handlePause = () = { audio.pause() dispatch(pause()) } return ( div className=\"App\" BrowserRouter div MobileHeader / div className=\"flex relative\" SideBar / MainSection handlePause={handlePause} handlePlay={handlePlay} / FooterPlayer handlePause={handlePause} handlePlay={handlePlay} / div div BrowserRouter div ); } export default App The updated App.js will handle the play/pause functionality with its handlePlay and handlePause functions.\nIn this file, imported the React-Redux modules that required useDispatch and useSelector. And we imported the play and pause action. When users click on the pause/play button, these actions will be dispatched. They will trigger a change of state of our application by either adding an episode to the redux store, changing the isPlaying to true or false as discussed in the previous sections.\n// Don't copy part of App.js above const [audio, setAudio] = useState({}) const dispatch = useDispatch() const currentTrack = useSelector((state) = state.currentTrack) const { isPlaying, episode: { episodeUrl, collectionName } } = currentTrack In the snippet above, an audio placeholder is created and initialized to an empty object using the useState React Hook. As explained in part 2 of this tutorial.\nThen useDispatch is assigned.\nAnd then currentTrack is gotten from the redux state management or store to get the currenctTrack object that we passed into the store.\nThen currentTrack is desctructured to get the isPlaying, episodeUrl and collectionName. Since this is related to state management whenever any of the properties of currentTrack is updated isPlaying, episodeUrl, and collectionName will be updated immeditely. Since we are implementing this in the App.js, we can pass this variable down to any proponent at prop to be consumed by any component in our application.\nThe handlePlay() function will handle playing new episodes and episodes already in the states currentTrack. It uses JavaScript currying, to pass the particular element to the function. Since the episodes are in a list in the PodcastDetailsScreen component. If you donâ€™t use currying it can lead to unexpected behavior when the button is clicked.\nThe handlePlay() has an if statement with 2 conditions and 1 fall back. If the is episodeUrl is undefined denoted by !episodeUrl. It means the user just launched the application and has not played any video. So the FooterPlayer component at the bottom of the page will not be displayed.\nsound = new Audio(episode.episodeUrl) sound.play() setAudio(sound) dispatch(play(episode)) Then assign the episodes' URL to the Audio API, which downloads the audio file. And call the play() function of the Audio API. Next, call setAudio(sound), a React Hook, to assess the playing audios' object to our application state variable audio.\nThen dispatch the play(episode) action to React-Redux so that it will save the episode in the state. And make it available to the FooterPlayer component. The play(episode) dispatch will also change isPlaying to true which will make the pause image appear.\nThe next condition in the if statement - episodeUrl !== episode.episodeUrl. This passed the episodeUrl is undefined check. It will only be true when the user tries to play a different episode.\naudio.pause() sound = new Audio(episode.episodeUrl) sound.play() setAudio(sound) dispatch(play(episode)) It pauses any audio currently playing. Before assigning the new episodeUrl to the Audio API. Besides pausing the audio its functionality is similar to the first condition.\nThen:\nelse { audio.play() dispatch(play(episode)) } The fallback of the if statement. The program only gets to this point if the user is trying to continue playing an episode that was paused.\nThe handlePause() just pauses the audio and dispatches pause() action to change isPlaying to false in the redux store.\nIn the return statement of the App component. You pass the function down as props to MainSection and FooterPlayer component.\nMainSection handlePause={handlePause} handlePlay={handlePlay} / FooterPlayer handlePause={handlePause} handlePlay={handlePlay} / ðŸ’¡ Checkpoint 3 If you have come this far. You should have an empty currentTrack in your Redux Chrome Extension.\n ðŸ”— If you donâ€™t have the extension. Download it for Chrome here.\n  ðŸ”— You can find the code for this part here GitHub\n  There will be no live code for this part. But please crosscheck your code with the GitHub source code for this part.\n Other parts of the tutorial ðŸ“˜ How to Build a Podcast Player With React Js part 1\nðŸ“˜ How to Build a Podcast Player With React Js part 2\nðŸ“˜ How to Build a Podcast Player With React Js part 3\nðŸ“˜ How to Build a Podcast Player With React Js part 4\nðŸ“˜ How to Build a Podcast Player With React Js part 5\n","wordCount":"2315","inLanguage":"en","datePublished":"2021-06-23T16:29:49+01:00","dateModified":"2021-06-23T16:29:49+01:00","author":{"@type":"Person","name":"Ugochukwu Avoaja"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://techwizerd.com/posts/how-to-build-a-podcast-player-with-react-js-tailwind-css-and-apple-podcast-api-part-3/"},"publisher":{"@type":"Organization","name":"Techwizerd - Full Stack Developer - React, Python, Django","logo":{"@type":"ImageObject","url":"https://techwizerd.com/img/favicon.ico"}}}</script></head><body id=top><script>if(localStorage.getItem("pref-theme")==="dark"){document.body.classList.add('dark');}else if(localStorage.getItem("pref-theme")==="light"){document.body.classList.remove('dark')}else if(window.matchMedia('(prefers-color-scheme: dark)').matches){document.body.classList.add('dark');}</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://techwizerd.com accesskey=h title="techwizerd.com (Alt + H)"><img src=/img/logo.png alt=logo aria-label=logo height=35>techwizerd.com</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu onscroll=menu_on_scroll()><li><a href=https://techwizerd.com/categories/ title=categories><span>categories</span></a></li><li><a href=https://techwizerd.com/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://techwizerd.com/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>How to Build a Podcast Player With React Js Tailwind Css and Apple Podcast Api Part 3</h1><div class=post-meta>June 23, 2021&nbsp;Â·&nbsp;11 min&nbsp;Â·&nbsp;Ugochukwu Avoaja</div></header><div class=post-content><h2 id=setting-up-the-react-redux-store-to-handle-playing-audio>Setting up the React-Redux store to handle playing audio<a hidden class=anchor aria-hidden=true href=#setting-up-the-react-redux-store-to-handle-playing-audio>#</a></h2><p>In this section, we would implement the react-redux state management that handles our currently playing podcast. And allows users to visit other pages without stopping the music.</p><p>This means that the playing audio will be attached to a component that is rendered throughout the entire application. The <code>App</code> component is the best component that fits this bill in our application. Because all other components are its children in one way other.</p><h3 id=a-little-about-react-redux>A little about React-Redux<a hidden class=anchor aria-hidden=true href=#a-little-about-react-redux>#</a></h3><p><a href=https://redux.js.org/introduction/getting-started>Redux</a> is a predictable state container for JavaScript apps.</p><p><a href=https://react-redux.js.org/introduction/getting-started>React Redux</a> is the official React UI bindings layer for Redux. It lets your React components read data from a Redux store and dispatch actions to the store to update the state.</p><p>React-Redux helps manage the state across the application. Whenever the application state is updated, it will reflect everywhere the state is subscribed. It is perfect for our functional components. And even for state components, you do not have to pass the state down through props. It can get messy. With React-Redux, you can maintain a single source of truth where all components can subscribe to. Since it is a state management tool, it can persist between page navigations, which is perfect for our audio player.</p><p>If you want to learn more about React Redux, please visit the <a href=https://react-redux.js.org/introduction/getting-started>official site</a>.</p><p>To set up a working React Redux store, you have to do the following:</p><ul><li>Install react-redux, redux-thunk</li><li>Create a play audio reducer (React Redux)</li><li>Create a play audio action (React Redux)</li><li>Create a store</li><li>Subscribe the entire application to the store</li><li>Create functions in <code>App.js</code> to handle audio</li></ul><h3 id=other-parts-of-the-tutorial>Other parts of the tutorial<a hidden class=anchor aria-hidden=true href=#other-parts-of-the-tutorial>#</a></h3><p>ðŸ“˜ <a href=../how-to-build-a-podcast-player-with-react-js-tailwind-css-and-apple-podcast-api/>How to Build a Podcast Player With React Js part 1</a></p><p>ðŸ“˜ <a href=../how-to-build-a-podcast-player-with-react-js-tailwind-css-and-apple-podcast-api-part-2/>How to Build a Podcast Player With React Js part 2</a></p><p>ðŸ“˜ <a href=../how-to-build-a-podcast-player-with-react-js-tailwind-css-and-apple-podcast-api-part-3/>How to Build a Podcast Player With React Js part 3</a></p><p>ðŸ“˜ <a href=../how-to-build-a-podcast-player-with-react-js-tailwind-css-and-apple-podcast-api-part-4/>How to Build a Podcast Player With React Js part 4</a></p><p>ðŸ“˜ <a href=../how-to-build-a-podcast-player-with-react-js-tailwind-css-and-apple-podcast-api-part-5/>How to Build a Podcast Player With React Js part 5</a></p><h3 id=install-react-redux-redux-thunk>Install react-redux, redux-thunk<a hidden class=anchor aria-hidden=true href=#install-react-redux-redux-thunk>#</a></h3><p>Run:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsx data-lang=jsx><span style=color:#a6e22e>yarn</span> <span style=color:#a6e22e>add</span> <span style=color:#a6e22e>react</span><span style=color:#f92672>-</span><span style=color:#a6e22e>redux</span> <span style=color:#a6e22e>redux</span><span style=color:#f92672>-</span><span style=color:#a6e22e>thunk</span>
</code></pre></div><h3 id=create-a-play-audio-reducer-react-redux>Create a play audio reducer (React Redux)<a hidden class=anchor aria-hidden=true href=#create-a-play-audio-reducer-react-redux>#</a></h3><p>Create a folder called <code>redux</code> within the <code>src</code> folder. This folder will house all the react-redux related files.</p><p>Create a folder within the <code>redux</code> folder called <code>reducers</code>. Then create a new file called <code>playEpisodeReducer.js</code> within the <code>reducers</code> folder.</p><p>Reducers are functions that take the current <code>state</code> and an <code>action</code> as arguments and return a new <code>state</code> result. In other words, <code>(state, action) => newState</code>.</p><p>Copy the code below into the <code>playEpisodeReducer.js</code> file.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsx data-lang=jsx><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>EPISODE_PLAY_REQUEST</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;EPISODE_PLAY_REQUEST&#39;</span>
<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>EPISODE_PLAYING</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;EPISODE_PLAYING&#39;</span>
<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>EPISODE_PAUSE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;EPISODE_PAUSE&#39;</span>

<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>initialState</span> <span style=color:#f92672>=</span> {
  <span style=color:#a6e22e>loading</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>,
  <span style=color:#a6e22e>isPlaying</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>undefined</span>,
  <span style=color:#a6e22e>episode</span><span style=color:#f92672>:</span> {},
  <span style=color:#a6e22e>error</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>
}

<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>playEpisodeReducer</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>state</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>initialState</span>, <span style=color:#a6e22e>action</span>) =&gt; {
  <span style=color:#66d9ef>switch</span> (<span style=color:#a6e22e>action</span>.<span style=color:#a6e22e>type</span>) {
    <span style=color:#66d9ef>case</span> <span style=color:#a6e22e>EPISODE_PLAY_REQUEST</span><span style=color:#f92672>:</span>
      <span style=color:#66d9ef>return</span> {
        ...<span style=color:#a6e22e>state</span>,
        <span style=color:#a6e22e>episode</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>action</span>.<span style=color:#a6e22e>payload</span>,
        <span style=color:#a6e22e>loading</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
      }

    <span style=color:#66d9ef>case</span> <span style=color:#a6e22e>EPISODE_PLAYING</span><span style=color:#f92672>:</span>
      <span style=color:#66d9ef>return</span> {
        ...<span style=color:#a6e22e>state</span>,
        <span style=color:#a6e22e>isPlaying</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
        <span style=color:#a6e22e>loading</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>
      }

    <span style=color:#66d9ef>case</span> <span style=color:#a6e22e>EPISODE_PAUSE</span><span style=color:#f92672>:</span>
      <span style=color:#66d9ef>return</span> {
        ...<span style=color:#a6e22e>state</span>,
        <span style=color:#a6e22e>isPlaying</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>
      }

    <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span>
      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>state</span>
  }
}
</code></pre></div><p>This reducer has 3 actions.</p><p>When the <code>EPISODE_PLAY_REQUEST</code> is triggered. It returns the state and <code>episode</code> object, which holds details of the episode the user just clicked on. It then sets <code>loading</code> to <code>true</code>, although no loading signal was implemented in the application. You can implement that later. It will not impact the application&rsquo;s functionality; the audio is either playing or not in the application. But most audio apps have a loading functionality; as the audio loads, you get a spinning indicator telling you that the music is downloading and will start soon.</p><p>The <code>episode</code> object can now be accessed anywhere in the application because it has been added to the store. The store will be created soon.</p><p>The <code>EPISODE_PLAYING</code> is triggered right after <code>EPISODE_PLAY_REQUEST</code>, and it also returns the state. It changes <code>loading</code> to <code>false</code>. And also returns <code>isPlaying</code> as <code>true</code>. <code>isPlaying</code> will be used to display the pause button. When <code>isPlaying</code> is <code>true</code>, the pause button will be displayed, and when <code>isPlaying</code> is <code>false</code>, the play button will display. The play/pause buttons will be implemented in the components.</p><p>If no action is passed the code defaults to the <code>default</code> and just returns the <code>state</code>.</p><h3 id=create-a-play-audio-action-react-redux>Create a play audio action (React Redux)<a hidden class=anchor aria-hidden=true href=#create-a-play-audio-action-react-redux>#</a></h3><p>Create a folder within the <code>redux</code> folder called <code>actions</code>. Then create a new file called <code>playEpisodeActions.js</code> within the <code>actions</code> folder.</p><p>Copy the code below into the <code>playEpisodeActions.js</code> file.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsx data-lang=jsx><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>EPISODE_PLAY_REQUEST</span>, <span style=color:#a6e22e>EPISODE_PLAYING</span>, <span style=color:#a6e22e>EPISODE_PAUSE</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../reducers/playEpisodeReducer&#39;</span>

<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>play</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>episode</span>) =&gt; <span style=color:#66d9ef>async</span> (<span style=color:#a6e22e>dispatch</span>) =&gt; {

  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>episodeDetails</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getEpisodeDetails</span>(<span style=color:#a6e22e>episode</span>)
  
  <span style=color:#a6e22e>dispatch</span> ({
    <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>EPISODE_PLAY_REQUEST</span>,
    <span style=color:#a6e22e>payload</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>episodeDetails</span>
  })

  <span style=color:#66d9ef>try</span> {
    <span style=color:#a6e22e>dispatch</span>({
      <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>EPISODE_PLAYING</span>
    })
  } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>error</span>) {
    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>error</span>)
  }
}

<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>pause</span> <span style=color:#f92672>=</span> () =&gt; (<span style=color:#a6e22e>dispatch</span>) =&gt; {
  <span style=color:#a6e22e>dispatch</span>({
    <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>EPISODE_PAUSE</span>
  })
}

<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>getEpisodeDetails</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>episode</span>) =&gt; {
  <span style=color:#75715e>// episode object has so many properties, take only relevant ones
</span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>episodeUrl</span>, <span style=color:#a6e22e>artworkUrl60</span>, <span style=color:#a6e22e>trackId</span>, <span style=color:#a6e22e>trackTimeMillis</span>, <span style=color:#a6e22e>trackName</span>, <span style=color:#a6e22e>shortDescription</span>, <span style=color:#a6e22e>collectionName</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>episode</span>

  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>episodeDetails</span> <span style=color:#f92672>=</span> {
    <span style=color:#a6e22e>episodeUrl</span>,
    <span style=color:#a6e22e>artworkUrl60</span>, 
    <span style=color:#a6e22e>trackId</span>, 
    <span style=color:#a6e22e>trackTimeMillis</span>, 
    <span style=color:#a6e22e>trackName</span>, 
    <span style=color:#a6e22e>shortDescription</span>, 
    <span style=color:#a6e22e>collectionName</span>
  }
  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>episodeDetails</span>
}
</code></pre></div><p>This file has 3 functions, 2 (<code>play</code> and <code>pause</code>) are redux <code>actions</code>. The other one, <code>getEpisodeDetails</code>, is a helper function.</p><p>The <code>getEpisodeDetails</code> takes an episode as a parameter, destructures it to get only the properties that will be displayed in the application. Then creates and returns an object called <code>episodeDetails</code>. This function is necessary because each episode record from Apple&rsquo;s API has a lot of properties. And only a few are needed by the application.</p><p>The <code>play</code> function will be called when the play button is clicked. In the <code>play</code> function, <code>getEpisodeDetails</code> is called to trim down episode and save the result in <code>episodeDetails</code> constant.</p><p>Next, you dispatch the <code>EPISODE_PLAY_REQUEST</code> action and pass <code>episodeDetails</code> to the <code>reducer</code>. This dispatch will match the <code>EPISODE_PLAY_REQUEST</code> condition in the <code>playEpisodeReducer.js</code>&rsquo;s <code>switch</code> case, which will save the <code>episodeDetails</code> to the store.</p><p>Then a <code>try/catch</code> is used to dispatch <code>EPISODE_PLAYING</code> to the store. This will match <code>EPISODE_PLAYING</code> condition in the <code>playEpisodeReducer.js</code> <code>switch</code> case, which changes the <code>isPlaying</code> to true, to indicate that audio is playing.</p><p>The <code>pause</code> function dispatches the <code>EPISODE_PAUSE</code> action to the store, which changes the <code>isPlaying</code> to false.</p><p>The play and pause functions are handled by React components, while redux maintains the currently playing episode. So that you can have it in our footer section, which doesn&rsquo;t change as we navigate between different pages, and you can also navigate through different pages while the audio is playing.</p><h3 id=create-a-store>Create a store<a hidden class=anchor aria-hidden=true href=#create-a-store>#</a></h3><p>The next step is to bring this all together. By creating a store. The store is responsible for coordinating the flow between the <code>action</code> and <code>reducer</code>.</p><p>In the <code>redux</code> folder, create a file called <code>store.js</code>.</p><p>Copy the code below into the <code>store.js</code> file.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsx data-lang=jsx><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>createStore</span>, <span style=color:#a6e22e>combineReducers</span>, <span style=color:#a6e22e>compose</span>, <span style=color:#a6e22e>applyMiddleware</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;redux&#39;</span>
<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>thunk</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;redux-thunk&#39;</span>;

<span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>playEpisodeReducer</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./reducers/playEpisodeReducer&#39;</span>

<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>initialState</span> <span style=color:#f92672>=</span> {
  <span style=color:#a6e22e>currentTrack</span><span style=color:#f92672>:</span> { <span style=color:#a6e22e>episode</span> <span style=color:#f92672>:</span> {<span style=color:#a6e22e>episodeUrl</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>undefined</span>}}
}

<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>reducer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>combineReducers</span>({
  <span style=color:#a6e22e>currentTrack</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>playEpisodeReducer</span>
})

<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>composeEnhancer</span> <span style=color:#f92672>=</span> window.<span style=color:#a6e22e>__REDUX_DEVTOOLS_EXTENSION_COMPOSE__</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>compose</span>;

<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>store</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createStore</span>(
  <span style=color:#a6e22e>reducer</span>,
  <span style=color:#a6e22e>initialState</span>,
  <span style=color:#a6e22e>composeEnhancer</span>(<span style=color:#a6e22e>applyMiddleware</span>(<span style=color:#a6e22e>thunk</span>))
)

<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>store</span>
</code></pre></div><p>The process of creating a redux store is the same across most applications. For a comprehensive guide to React-Redux, <a href=https://www.valentinog.com/blog/redux/>see this tutorial</a> and the <a href=https://react-redux.js.org/tutorials/quick-start#create-a-redux-store>official guide</a>.</p><p>In this file, multiple modules are imported through <code>redux</code> and <code>redux-thunk</code>.</p><p>The <code>reducer</code> - <code>playEpisodeReducer</code> is also imported to register it.</p><p>Next, an <code>initialState</code> object is created. This object has nested objects <code>episode</code> within <code>currentTrack</code>. And the <code>episode</code> object has an <code>episodeUrl</code> property set to <code>undefined</code>. This property will be used to hide or display the <code>FooterPlayer</code> component. If <code>episodeUrl</code> is <code>undefined</code>, the <code>FooterPlayer</code> will not show. Because it means the user has not tried to play any episode since visiting the application.</p><p>This <code>initialState</code> object is a representation of the redux store when the application is first loaded. When the user clicks on <code>play</code> then <code>episodeDetails</code> will be updated with details of the episode that was clicked.</p><p>The net part is boiler plate code.</p><p>Next register the <code>reducer</code> through <code>combineReducers</code>.</p><p>Then add the Redux chrome dev tools.</p><p>Then finally create the store with the reducer and initial state.</p><h3 id=subscribe-the-entire-application-to-the-store>Subscribe the entire application to the store<a hidden class=anchor aria-hidden=true href=#subscribe-the-entire-application-to-the-store>#</a></h3><p>Go back to the <code>index.js</code> file in the root of the <code>src</code> folder.</p><p>Overwrite all the code in <code>index.css</code> with the code below</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsx data-lang=jsx><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;react&#39;</span>;
<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>ReactDOM</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;react-dom&#39;</span>;
<span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#39;./index.css&#39;</span>;
<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>App</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./App&#39;</span>;

<span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Provider</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;react-redux&#39;</span>
<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>store</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./redux/store&#39;</span>

<span style=color:#a6e22e>ReactDOM</span>.<span style=color:#a6e22e>render</span>(
  &lt;<span style=color:#f92672>React.StrictMode</span>&gt;
    &lt;<span style=color:#f92672>Provider</span> <span style=color:#a6e22e>store</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>store</span>}&gt;
      &lt;<span style=color:#f92672>App</span> /&gt;
    &lt;/<span style=color:#f92672>Provider</span>&gt;
    
  &lt;/<span style=color:#f92672>React.StrictMode</span>&gt;,
  document.<span style=color:#a6e22e>getElementById</span>(<span style=color:#e6db74>&#39;root&#39;</span>)
);
</code></pre></div><p>Here you are registering the redux store in our application. All you have done so far is create the store its reducer and actions.</p><h3 id=create-functions-in-appjs-to-handle-audio>Create functions in <code>App.js</code> to handle audio<a hidden class=anchor aria-hidden=true href=#create-functions-in-appjs-to-handle-audio>#</a></h3><p>Now go back to the <code>App.js</code> file.</p><p>And overwrite the code in there with the one below.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsx data-lang=jsx><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span>, { <span style=color:#a6e22e>useState</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;react&#39;</span>
<span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>BrowserRouter</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;react-router-dom&#39;</span>

<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>SideBar</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./containers/SideBar&#39;</span>
<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MainSection</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./containers/MainSection&#39;</span>
<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MobileHeader</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./components/MobileHeader&#39;</span>
<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>FooterPlayer</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./components/FooterPlayer&#39;</span>

<span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useDispatch</span>, <span style=color:#a6e22e>useSelector</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;react-redux&#39;</span>
<span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>play</span>, <span style=color:#a6e22e>pause</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./redux/actions/playEpisodeActions&#39;</span>

<span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#39;./App.css&#39;</span>;

<span style=color:#66d9ef>function</span> <span style=color:#a6e22e>App</span>() {
  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>audio</span>, <span style=color:#a6e22e>setAudio</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>({})
  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>dispatch</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useDispatch</span>()
  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>currentTrack</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useSelector</span>((<span style=color:#a6e22e>state</span>) =&gt; <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>currentTrack</span>)
  <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>isPlaying</span>, <span style=color:#a6e22e>episode</span><span style=color:#f92672>:</span> { <span style=color:#a6e22e>episodeUrl</span>, <span style=color:#a6e22e>collectionName</span> } } <span style=color:#f92672>=</span> <span style=color:#a6e22e>currentTrack</span>

  document.<span style=color:#a6e22e>title</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>collectionName</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>isPlaying</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>collectionName</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Podcast Player&#39;</span>

  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>handlePlay</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>episode</span>) =&gt; (<span style=color:#a6e22e>e</span>) =&gt; {  
    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>sound</span>
    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>episodeUrl</span>) {
      <span style=color:#a6e22e>sound</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Audio</span>(<span style=color:#a6e22e>episode</span>.<span style=color:#a6e22e>episodeUrl</span>)
      <span style=color:#a6e22e>sound</span>.<span style=color:#a6e22e>play</span>()
      <span style=color:#a6e22e>setAudio</span>(<span style=color:#a6e22e>sound</span>)
      <span style=color:#a6e22e>dispatch</span>(<span style=color:#a6e22e>play</span>(<span style=color:#a6e22e>episode</span>))
    } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>episodeUrl</span> <span style=color:#f92672>!==</span> <span style=color:#a6e22e>episode</span>.<span style=color:#a6e22e>episodeUrl</span>) {
      <span style=color:#a6e22e>audio</span>.<span style=color:#a6e22e>pause</span>()
      <span style=color:#a6e22e>sound</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Audio</span>(<span style=color:#a6e22e>episode</span>.<span style=color:#a6e22e>episodeUrl</span>)
      <span style=color:#a6e22e>sound</span>.<span style=color:#a6e22e>play</span>()
      <span style=color:#a6e22e>setAudio</span>(<span style=color:#a6e22e>sound</span>)
      <span style=color:#a6e22e>dispatch</span>(<span style=color:#a6e22e>play</span>(<span style=color:#a6e22e>episode</span>))
    } <span style=color:#66d9ef>else</span> {
      <span style=color:#a6e22e>audio</span>.<span style=color:#a6e22e>play</span>()
      <span style=color:#a6e22e>dispatch</span>(<span style=color:#a6e22e>play</span>(<span style=color:#a6e22e>episode</span>))
    }
  }

  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>handlePause</span> <span style=color:#f92672>=</span> () =&gt; {
    <span style=color:#a6e22e>audio</span>.<span style=color:#a6e22e>pause</span>()
    <span style=color:#a6e22e>dispatch</span>(<span style=color:#a6e22e>pause</span>())
  }

  <span style=color:#66d9ef>return</span> (
    &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;App&#34;</span>&gt;
      &lt;<span style=color:#f92672>BrowserRouter</span>&gt;
      &lt;<span style=color:#f92672>div</span>&gt;
        &lt;<span style=color:#f92672>MobileHeader</span> /&gt;
        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;flex relative&#34;</span>&gt;
          &lt;<span style=color:#f92672>SideBar</span> /&gt;
          &lt;<span style=color:#f92672>MainSection</span> <span style=color:#a6e22e>handlePause</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>handlePause</span>} <span style=color:#a6e22e>handlePlay</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>handlePlay</span>} /&gt;
          &lt;<span style=color:#f92672>FooterPlayer</span> <span style=color:#a6e22e>handlePause</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>handlePause</span>} <span style=color:#a6e22e>handlePlay</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>handlePlay</span>} /&gt;
        &lt;/<span style=color:#f92672>div</span>&gt;
      &lt;/<span style=color:#f92672>div</span>&gt;
      &lt;/<span style=color:#f92672>BrowserRouter</span>&gt;
    &lt;/<span style=color:#f92672>div</span>&gt;
  );
}

<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>App</span>
</code></pre></div><p>The updated <code>App.js</code> will handle the play/pause functionality with its <code>handlePlay</code> and <code>handlePause</code> functions.</p><p>In this file, imported the React-Redux modules that required <code>useDispatch</code> and <code>useSelector</code>. And we imported the <code>play</code> and <code>pause</code> action. When users click on the pause/play button, these actions will be dispatched. They will trigger a change of state of our application by either adding an episode to the redux store, changing the <code>isPlaying</code> to <code>true</code> or <code>false</code> as discussed in the previous sections.</p><pre><code>// Don't copy part of App.js above
const [audio, setAudio] = useState({})
const dispatch = useDispatch()
const currentTrack = useSelector((state) =&gt; state.currentTrack)
const { isPlaying, episode: { episodeUrl, collectionName } } = currentTrack
</code></pre><p>In the snippet above, an audio placeholder is created and initialized to an empty object using the <code>useState</code> React Hook. As explained in part 2 of this tutorial.</p><p>Then <code>useDispatch</code> is assigned.</p><p>And then <code>currentTrack</code> is gotten from the redux state management or store to get the <code>currenctTrack</code> object that we passed into the store.</p><p>Then <code>currentTrack</code> is desctructured to get the <code>isPlaying</code>, <code>episodeUrl</code> and <code>collectionName</code>. Since this is related to state management whenever any of the properties of <code>currentTrack</code> is updated <code>isPlaying</code>, <code>episodeUrl</code>, and <code>collectionName</code> will be updated immeditely. Since we are implementing this in the <code>App.js</code>, we can pass this variable down to any proponent at prop to be consumed by any component in our application.</p><p>The <code>handlePlay()</code> function will handle playing new episodes and episodes already in the states <code>currentTrack</code>. It uses JavaScript currying, to pass the particular element to the function. Since the episodes are in a list in the <code>PodcastDetailsScreen</code> component. If you don&rsquo;t use currying it can lead to unexpected behavior when the button is clicked.</p><p>The <code>handlePlay()</code> has an if statement with 2 conditions and 1 fall back. If the is <code>episodeUrl</code> is <code>undefined</code> denoted by <code>!episodeUrl</code>. It means the user just launched the application and has not played any video. So the <code>FooterPlayer</code> component at the bottom of the page will not be displayed.</p><pre><code>sound = new Audio(episode.episodeUrl)
sound.play()
setAudio(sound)
dispatch(play(episode))
</code></pre><p>Then assign the episodes' URL to the Audio API, which downloads the audio file. And call the <code>play()</code> function of the Audio API. Next, call <code>setAudio(sound)</code>, a React Hook, to assess the playing audios' object to our application state variable <code>audio</code>.</p><p>Then dispatch the <code>play(episode)</code> action to React-Redux so that it will save the episode in the state. And make it available to the <code>FooterPlayer</code> component. The <code>play(episode)</code> dispatch will also change <code>isPlaying</code> to <code>true</code> which will make the pause image appear.</p><p>The next condition in the <code>if</code> statement - <code>episodeUrl !== episode.episodeUrl</code>. This passed the <code>episodeUrl</code> is <code>undefined</code> check. It will only be true when the user tries to play a different episode.</p><pre><code>audio.pause()
sound = new Audio(episode.episodeUrl)
sound.play()
setAudio(sound)
dispatch(play(episode))
</code></pre><p>It pauses any audio currently playing. Before assigning the new <code>episodeUrl</code> to the Audio API. Besides pausing the audio its functionality is similar to the first condition.</p><p>Then:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsx data-lang=jsx><span style=color:#66d9ef>else</span> {
    <span style=color:#a6e22e>audio</span>.<span style=color:#a6e22e>play</span>()
    <span style=color:#a6e22e>dispatch</span>(<span style=color:#a6e22e>play</span>(<span style=color:#a6e22e>episode</span>))
}
</code></pre></div><p>The fallback of the if statement. The program only gets to this point if the user is trying to continue playing an episode that was paused.</p><p>The <code>handlePause()</code> just pauses the audio and dispatches <code>pause()</code> action to change <code>isPlaying</code> to <code>false</code> in the redux store.</p><p>In the return statement of the <code>App</code> component. You pass the function down as props to <code>MainSection</code> and <code>FooterPlayer</code> component.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsx data-lang=jsx>&lt;<span style=color:#f92672>MainSection</span> <span style=color:#a6e22e>handlePause</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>handlePause</span>} <span style=color:#a6e22e>handlePlay</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>handlePlay</span>} /&gt;
&lt;<span style=color:#f92672>FooterPlayer</span> <span style=color:#a6e22e>handlePause</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>handlePause</span>} <span style=color:#a6e22e>handlePlay</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>handlePlay</span>} /&gt;
</code></pre></div><h3 id=-checkpoint-3>ðŸ’¡ Checkpoint 3<a hidden class=anchor aria-hidden=true href=#-checkpoint-3>#</a></h3><p>If you have come this far. You should have an empty <code>currentTrack</code> in your Redux Chrome Extension.</p><blockquote><p>ðŸ”— If you don&rsquo;t have the extension. Download it <a href="https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd?hl=en">for Chrome here</a>.</p></blockquote><blockquote><p>ðŸ”— You can find the code for this part here <a href=https://github.com/avoajaugochukwu/podcast_player_tutorial/tree/master/Checkpoint_03>GitHub</a></p></blockquote><blockquote><p>There will be no live code for this part. But please crosscheck your code with the GitHub source code for this part.</p></blockquote><h3 id=other-parts-of-the-tutorial-1>Other parts of the tutorial<a hidden class=anchor aria-hidden=true href=#other-parts-of-the-tutorial-1>#</a></h3><p>ðŸ“˜ <a href=../how-to-build-a-podcast-player-with-react-js-tailwind-css-and-apple-podcast-api/>How to Build a Podcast Player With React Js part 1</a></p><p>ðŸ“˜ <a href=../how-to-build-a-podcast-player-with-react-js-tailwind-css-and-apple-podcast-api-part-2/>How to Build a Podcast Player With React Js part 2</a></p><p>ðŸ“˜ <a href=../how-to-build-a-podcast-player-with-react-js-tailwind-css-and-apple-podcast-api-part-3/>How to Build a Podcast Player With React Js part 3</a></p><p>ðŸ“˜ <a href=../how-to-build-a-podcast-player-with-react-js-tailwind-css-and-apple-podcast-api-part-4/>How to Build a Podcast Player With React Js part 4</a></p><p>ðŸ“˜ <a href=../how-to-build-a-podcast-player-with-react-js-tailwind-css-and-apple-podcast-api-part-5/>How to Build a Podcast Player With React Js part 5</a></p></div><footer class=post-footer><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share How to Build a Podcast Player With React Js Tailwind Css and Apple Podcast Api Part 3 on twitter" href="https://twitter.com/intent/tweet/?text=How%20to%20Build%20a%20Podcast%20Player%20With%20React%20Js%20Tailwind%20Css%20and%20Apple%20Podcast%20Api%20Part%203&url=https%3a%2f%2ftechwizerd.com%2fposts%2fhow-to-build-a-podcast-player-with-react-js-tailwind-css-and-apple-podcast-api-part-3%2f&hashtags="><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512h-386.892c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892zm-253.927 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share How to Build a Podcast Player With React Js Tailwind Css and Apple Podcast Api Part 3 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2ftechwizerd.com%2fposts%2fhow-to-build-a-podcast-player-with-react-js-tailwind-css-and-apple-podcast-api-part-3%2f&title=How%20to%20Build%20a%20Podcast%20Player%20With%20React%20Js%20Tailwind%20Css%20and%20Apple%20Podcast%20Api%20Part%203&summary=How%20to%20Build%20a%20Podcast%20Player%20With%20React%20Js%20Tailwind%20Css%20and%20Apple%20Podcast%20Api%20Part%203&source=https%3a%2f%2ftechwizerd.com%2fposts%2fhow-to-build-a-podcast-player-with-react-js-tailwind-css-and-apple-podcast-api-part-3%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512h-386.892c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0v-129.439c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02v-126.056c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768h75.024zm-307.552-334.556c-25.674.0-42.448 16.879-42.448 39.002.0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share How to Build a Podcast Player With React Js Tailwind Css and Apple Podcast Api Part 3 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2ftechwizerd.com%2fposts%2fhow-to-build-a-podcast-player-with-react-js-tailwind-css-and-apple-podcast-api-part-3%2f&title=How%20to%20Build%20a%20Podcast%20Player%20With%20React%20Js%20Tailwind%20Css%20and%20Apple%20Podcast%20Api%20Part%203"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512h-386.892c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zm-119.474 108.193c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zm-160.386-29.702c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share How to Build a Podcast Player With React Js Tailwind Css and Apple Podcast Api Part 3 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2ftechwizerd.com%2fposts%2fhow-to-build-a-podcast-player-with-react-js-tailwind-css-and-apple-podcast-api-part-3%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978v-192.915h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share How to Build a Podcast Player With React Js Tailwind Css and Apple Podcast Api Part 3 on whatsapp" href="https://api.whatsapp.com/send?text=How%20to%20Build%20a%20Podcast%20Player%20With%20React%20Js%20Tailwind%20Css%20and%20Apple%20Podcast%20Api%20Part%203%20-%20https%3a%2f%2ftechwizerd.com%2fposts%2fhow-to-build-a-podcast-player-with-react-js-tailwind-css-and-apple-podcast-api-part-3%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512h-386.892c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23-13.314-11.876-22.304-26.542-24.916-31.026s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share How to Build a Podcast Player With React Js Tailwind Css and Apple Podcast Api Part 3 on telegram" href="https://telegram.me/share/url?text=How%20to%20Build%20a%20Podcast%20Player%20With%20React%20Js%20Tailwind%20Css%20and%20Apple%20Podcast%20Api%20Part%203&url=https%3a%2f%2ftechwizerd.com%2fposts%2fhow-to-build-a-podcast-player-with-react-js-tailwind-css-and-apple-podcast-api-part-3%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47A3.38 3.38.0 0126.49 29.86zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://techwizerd.com>Techwizerd - Full Stack Developer - React, Python, Django</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script defer src=/assets/js/highlight.min.27cd435cc9ed6abb4b496581b151804f79f366c412620272bb94e2f5f598ebcc.js integrity="sha256-J81DXMntartLSWWBsVGAT3nzZsQSYgJyu5Ti9fWY68w=" onload=hljs.initHighlightingOnLoad();></script><script>window.onload=function(){if(localStorage.getItem("menu-scroll-position")){document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position");}}
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();var id=this.getAttribute("href").substr(1);if(!window.matchMedia('(prefers-reduced-motion: reduce)').matches){document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({behavior:"smooth"});}else{document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();}
if(id==="top"){history.replaceState(null,null," ");}else{history.pushState(null,null,`#${id}`);}});});var mybutton=document.getElementById("top-link");window.onscroll=function(){if(document.body.scrollTop>800||document.documentElement.scrollTop>800){mybutton.style.visibility="visible";mybutton.style.opacity="1";}else{mybutton.style.visibility="hidden";mybutton.style.opacity="0";}};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft);}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{if(document.body.className.includes("dark")){document.body.classList.remove('dark');localStorage.setItem("pref-theme",'light');}else{document.body.classList.add('dark');localStorage.setItem("pref-theme",'dark');}})</script><script defer language=javascript type=text/javascript src=/js/copy_button.js></script></body></html>